# 日本銀行口座ローカライズモジュール要件定義書

## 1. モジュール概要
**モジュール名**: jp_bank_localization  
**バージョン**: 16.0.1.0.0  
**目的**: Odoo16の銀行口座管理機能を日本の銀行システムに適合させる

## 2. 対象機能範囲
- 連絡先（res.partner）の銀行口座タブ
- 銀行口座モデル（res.partner.bank）
- 銀行マスタ（res.bank）
- 会計モジュールの銀行口座関連機能

## 3. 機能要件

### 3.1 フィールドの日本語化
- [ ] 「口座番号」→「口座番号」（既存）
- [ ] 「銀行」→「銀行名」
- [ ] 「口座保持者」→「名義人」
- [ ] 「通貨」→「通貨」（既存）
- [ ] 「支払」→「振込先情報」

### 3.2 日本特有のフィールド追加
- [ ] **銀行コード**: 4桁の金融機関コード
- [ ] **支店名**: 支店の名称
- [ ] **支店コード**: 3桁の支店番号
- [ ] **口座種別**: 普通/当座/貯蓄/その他
- [ ] **口座名義（カナ）**: 半角カナでの名義人名
- [ ] **口座名義（漢字）**: 漢字での名義人名
- [ ] **SWIFT/BICコード**: 国際送金用（オプション）

### 3.3 フォーマット検証
- [ ] 銀行コード: 4桁数字（例：0001）
- [ ] 支店コード: 3桁数字（例：001）
- [ ] 口座番号: 7桁数字（例：1234567）
- [ ] 口座名義（カナ）: 半角カナ・英数字・記号
- [ ] SWIFT/BIC: 8文字または11文字の英数字

### 3.4 銀行マスタデータ
- [ ] 主要銀行の事前登録
  - メガバンク（三菱UFJ、三井住友、みずほ、りそな）
  - ゆうちょ銀行
  - 主要地方銀行
  - 主要ネット銀行（楽天、住信SBI、PayPay銀行等）
- [ ] 銀行コードによる銀行名自動入力
- [ ] 支店コードによる支店名自動入力（可能な範囲で）

### 3.5 表示形式
- [ ] 一覧表示での項目順序調整
- [ ] フォームビューでのレイアウト最適化
- [ ] 振込先情報の印刷用フォーマット

## 4. 技術要件

### 4.1 モデル拡張
```python
# res.partner.bank の拡張
- bank_code: Char(4) # 銀行コード
- branch_name: Char # 支店名
- branch_code: Char(3) # 支店コード
- account_type: Selection # 口座種別
- account_holder_kana: Char # 名義人（カナ）
- account_holder_kanji: Char # 名義人（漢字）
- swift_bic: Char(11) # SWIFT/BICコード
```

### 4.2 ビュー定義
- フォームビュー: 日本式レイアウト
- ツリービュー: 重要項目の表示
- 検索ビュー: 銀行コード・支店コードでの検索

### 4.3 バリデーション
- 銀行コード・支店コードの形式チェック
- 口座番号の桁数チェック
- カナ文字の半角変換処理

## 5. 非機能要件

### 5.1 互換性
- Odoo16標準機能との完全互換性
- 既存データの移行対応
- 他の日本語ローカライズモジュールとの共存

### 5.2 パフォーマンス
- 銀行マスタ検索の高速化
- 大量データでの動作保証

### 5.3 セキュリティ
- 口座情報の適切なアクセス制御
- 個人情報保護への配慮

## 6. 制約事項
- 全銀システムとの自動連携は対象外
- EB（エレクトロニックバンキング）連携は対象外
- 口座振替・引き落とし処理は対象外

## 7. 今後の拡張予定
- 全銀フォーマットでのエクスポート機能
- 銀行APIとの連携
- 口座確認機能

## 8. テスト要件
- [ ] 銀行口座の新規登録テスト
- [ ] バリデーションテスト
- [ ] 銀行マスタ検索テスト
- [ ] 既存データとの互換性テスト
- [ ] マルチカンパニー環境でのテスト

## 9. ドキュメント
- [ ] インストールガイド
- [ ] 操作マニュアル
- [ ] 銀行コード一覧
- [ ] API仕様書（将来拡張用）

## 10. 納期・マイルストーン
1. **Phase 1**: 基本フィールド追加とバリデーション
2. **Phase 2**: 銀行マスタデータ整備
3. **Phase 3**: UI/UX最適化
4. **Phase 4**: テストと文書化

---
作成日: 2025-08-07  
作成者: SasukeTorii / REV-C inc.