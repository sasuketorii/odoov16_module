Odoo 16 ドキュメントレイアウトウィザードへの「Japan」レイアウト追加に関する調査
標準ウィザードによるレポートレイアウト候補の取得方法

Odoo 16の「ドキュメントレイアウトを設定」ウィザード画面。標準で4種類のレイアウト（Light、Boxed、Bold、Striped）が選択可能だが、スクリーンショットでは DIN 5008（ドイツ向け書式）および Custom（カスタム）という追加レイアウトも表示されている[1][2]。今回の「Japan」レイアウトも同様の仕組みで追加できる。
Odoo 16コミュニティ版では、請求書などPDF帳票の共通レイアウトを「一般設定 → ドキュメントレイアウトを設定」ウィザード（モデル名: base.document.layout）で管理しています。このウィザードの「レイアウト」欄（ラジオボタン）は、report.layoutモデルに登録されたレイアウト候補レコードを動的に取得して表示しています[3]。デフォルトでは Light（ライト）, Boxed（ボックス）, Bold（ボールド）, Striped（ストライプ） の4種が存在し（それぞれのプレビュー画像付き）、各レコードに名称・表示順序・対応するQWebテンプレートビューなどが定義されています[4]。ウィザードは特定のドメインフィルタ無しでreport.layoutの全レコードを取得し、sequence順に表示していると考えられます（実際report.layoutモデルでは_order = 'sequence'が指定されています）。そのため、任意のカスタムレイアウトをウィザードの選択肢に追加するには、report.layoutモデルに適切なレコードを登録するだけで基本的には十分です[3]。実際、上記スクリーンショットでは、公式のドイツ向けレイアウトDIN 5008やカスタムレイアウトが追加登録され、ウィザード上に表示されていることが確認できます。
標準実装上、report.layoutレコードに対して特別なフィルタリングは行われていません。「Japan」レイアウトを表示させるうえで必須となる拡張箇所は、基本的には存在しません。Odoo標準に則り、以下の要素を用意することで、新規レイアウトは自動的にウィザードに組み込まれます。
① QWebレイアウトテンプレート（外部レイアウト）: 既存のweb.external_layout_standardテンプレートを継承してヘッダ・フッタ構造を踏襲しつつ、任意のデザインを実装したテンプレート。例としてJort氏のブログでは、自作モジュール内に base_document.external_layout_custom テンプレートを定義しています[5]。質問者様の場合、l10n_jp_invoice_system.external_layout_jp テンプレートを作成済みとのことなので、この要件は満たしています。
② report.layoutモデルのレコード: 上記テンプレートを紐づけるレイアウト定義レコード。必須フィールドはname（表示名）, view_id（使用する外部レイアウトテンプレートのビューID）, sequence（表示順）です（imageも設定済みが望ましい）。Jort氏の例では name="Custom", sequence=100 で新レイアウトを追加しています[3]。質問者様も name="Japan", sequence=6, view_idにカスタムテンプレートを指定したレコードを作成済みとのことなので、基本設定は問題ないように思われます。
ウィザード側では、これら新レコードを読み込んで自動的に候補に含める実装になっています。実際、ウィザードモデルbase.document.layoutには以下のようなコードがあります。
# （base_document_layout.py の一部抜粋）
wizard_layout = wizard.env["report.layout"].search([
    ('view_id.key', '=', wizard.company_id.external_report_layout_id.key)
])
wizard.report_layout_id = wizard_layout or wizard_layout.search([], limit=1)
上記は会社ごとの現在設定を取得する処理ですが、report.layoutモデルからビューキー（XML ID）で検索し、一致するレコードがあればウィザードのreport_layout_id（Many2one to report.layout型）にセットしています[6]（一致しない場合はデフォルトで最初のレイアウトをセット）。このように、ウィザードのreport_layout_idフィールドはreport.layoutレコードを参照するMany2oneであり、ウィザード画面ではその選択肢がラジオボタンとして表示されます[7]。したがって、追加した「Japan」レイアウトのレコードも正常に読み込まれていれば、ウィザード画面に表示されるはずです。
補足: report.layoutへの検索には特別な制限がないため、本来追加レコードが表示されないケースは考えにくいです。もし「Japan」が出てこない場合、以下の点を再確認してください。
依存関係とロード順: カスタムモジュールの__manifest__.pyでdependsにwebが含まれているか（webモジュールにbase.document.layoutモデルや標準レイアウトのビュー定義があるため）[8]。依存が抜けていると、テンプレート継承やデータロード順序で不整合が起きる可能性があります。
データの適用状況: report.layoutレコードが正しくインストール時に作成されたか。テクニカルメニューで存在を確認済みとのことなので問題無いと思われますが、例えば他モジュールから同IDのレコードが既に定義されていると競合で上書きされるケースも考えられます。
キャッシュ: Odooではレポートテンプレートやアセットのキャッシュが表示に影響することがあります。モジュールを更新しているとのことですが、念のため管理画面から「アセットのキャッシュクリア」を行ったり、サーバ再起動を試すことも有効です。ブラウザキャッシュは既にクリア済みとのことなので、クライアント側は問題ないでしょう。
仕様の根拠となる情報源・関連実装の調査結果
（1）公式ドキュメント・ソースコード上の挙動: Odoo公式の開発者ドキュメントには、デフォルトレイアウトが4種類存在する旨とドキュメントレイアウト設定ウィザードの説明があります[4]。また、コミュニティフォーラムやブログでも「カスタムレイアウトを追加する方法」として「report.layoutに新規レコードを定義しウィザードで選択可能にする」手順が紹介されています[9][3]。Jort de Vreeze氏のブログでは、「data/report_layout.xmlファイルで新しい（または既存の）レイアウトを定義する。これを行うことで、そのカスタムレイアウトが『ドキュメントレイアウトを設定』ウィザードに表示される」と明言されています[3]。実際の定義例として、<record id="report_layout_custom" model="report.layout">でnameやview_idを設定しているコードも示されています[3]。以上のことから、Odoo標準でウィザードのレイアウト候補はreport.layoutテーブルの内容に完全連動しており、そこにレコードを追加すれば自動的に選択肢が増える仕様であることが裏付けられます。
加えて、Odooソースコード上でのbase.document.layoutウィザード（addons/web/models/base_document_layout.py）の実装を見ると、前述した通りreport_layout_id = fields.Many2one('report.layout')としてフィールド定義され、widget="radio"でフォーム表示されます[7]。また、@api.onchange('company_id')で会社に対応した現在レイアウトをreport_layout_idにセットする処理内でreport.layoutを検索している箇所があります[10]。ここでもlimit指定がない通常のsearchを用いているため、該当すれば複数レコードも取得可能です（結果的にRadio一覧に反映）。Nameやその他条件でフィルタする処理も見当たりません。以上より、「Japan」レコードが表示されない直接的な原因は、レコードが何らかの理由で検索結果に含まれていないことになります。
考えられる一因としてMany2oneフィールドの既定の検索上限があります。OdooのMany2oneは通常、プルダウン表示時に最大限一定数（例えば10件程度）までしか候補を取得しません。しかし、Radioボタンウィジェットの場合、全候補を表示する実装になっている可能性が高く（UI上4件すべて表示されているため）、上限の影響は小さいと思われます。仮に上限が存在するとしても、デフォルト4件＋Japan1件で計5件ですので標準の上限（例えば7件）には収まります。従って、通常は追加レコードも漏れなく取得されるはずです。念のため、質問者様が実装された_ensure_japan_layout()でname_searchをフックした意図を推測すると、「検索時にJapanレイアウトが作成されていなければ自動生成する」ような仕組みかもしれません。もしそうであれば、モジュールインストール時点で一度Japanレコードを確実に生成するようにし、その後の検索結果に必ず存在する状態にしておくというアプローチです。実際、モジュールのpost_init_hookでもレコードを作成する処理を入れたとのことなので、重複しないよう注意しつつ、どちらか一方で確実に生成できていればOKです。いずれにせよ、問題は「Japanレイアウトのレコード自体は存在しているのにウィザードに出ない」点ですから、上記フックが原因で二重登録や不正な状態になっていないか（例えば同名の古いレコードがアーカイブ状態で残っている等）も確認が必要です。
（2）関連するコミュニティ情報: コミュニティや他社の実装例も、本件と類似するケースが報告・共有されています。例えば、Cybrosys社のブログ記事でもカスタムレイアウトの作成手順が解説されており、テンプレート作成からreport.layoutへのレコード追加、そして実際にウィザードから選択できることが紹介されています[11][12]。Cybrosysのコード例は極めてシンプルで、<template id="custom_report_external_layout">を定義し、その後ブログ内の説明に従って「Appsメニューからインストールすれば、新しいレイアウトがウィザードで選択可能になる」と述べています（※引用元はブログ内の文章のため具体的な参照箇所は省略）。これらからも、標準挙動としては追加のPython拡張なしにモジュールデータ定義だけで十分であることが分かります。
一方、Odoo公式の特定コミットにも興味深いものがあります。たとえば l10n_din5008 モジュールの実装を分離（ドイツ以外でもDIN規格を使えるようにする改善）したコミットでは、DIN5008用の外部レイアウトビュー external_layout_din5008 および対応するreport.layoutレコード（ID: report_layout_din5008）を追加する処理が含まれていました[13]（コミットID: eac2440f, 2021年9月13日） 。このように、Odoo社内でもローカライズや仕様追加の際にはreport.layoutへのレコード登録でレイアウトを増やしていることが確認できます。
既存モジュールにおけるカスタムレイアウト追加パターンの分析
ご質問にある DIN5008 や OCA (Odoo Community Association)の report_alternative_layout をはじめ、既存の公開モジュールで「ドキュメントレイアウトにカスタム選択肢を追加」している例を調査しました。それぞれアプローチが少し異なるため、設計上のポイントを整理します。
① Odoo公式の DIN5008 レイアウト (モジュール名: l10n_din5008):
DIN5008はドイツやオーストリア等で用いられる文書フォーマット規約で、Odoo 16では標準モジュールとして提供されています[2]。このモジュールはbase.document.layoutモデル（ウィザードモデル）の拡張と専用レイアウトの追加という2点を行っています。まず、res.companyやbase.document.layoutにDIN5008用の項目（例えば差出人住所ブロックの位置調整に使うフィールドなど）を追加し[14]、ウィザードでもそれらを設定できるようにしています。さらに、l10n_din5008.external_layout_din5008というカスタム外部レイアウトテンプレートを定義し、対応するreport.layoutレコード（名前はおそらく "DIN 5008"）を登録しています。これにより、設定ウィザードのレイアウト一覧に「DIN 5008」が現れ、ユーザはそれを選択可能になります。先のスクリーンショットでもDIN5008が追加表示されている通り、公式モジュールも今回の目標（Japanレイアウト追加）と同様のアプローチで実現されていると言えます。
設計上のポイント: 公式実装では単にテンプレートとレコードを追加するだけでなく、帳票出力内容の差異（住所の配置や日付形式などDIN規格への対応）のために、ウィザードおよびテンプレート側で追加フィールドや条件分岐を実装しています[14]。Japanレイアウトでも、例えば印影や社判の有無、日本語住所形式など独自要素を組み込む場合は、同様に会社・ウィザードにカスタム項目を持たせてテンプレートで参照する形が考えられます。もっとも、基本的なヘッダ/フッタの項目（会社情報、住所、VATなど）は標準フィールドで足りるため、現時点ではテンプレート内で工夫すれば追加フィールド無しでも対応可能でしょう。
② OCA の report_alternative_layout モジュール（日本向け帳票レイアウト）:
こちらは日本の商習慣に合わせて帳票レイアウトを調整するコミュニティ提供モジュールです[15]。興味深いのは、ウィザードのレイアウト選択肢を増やしていない点です。report_alternative_layoutは既存の「Standard（標準）レイアウト」を拡張して代替レイアウトを適用する仕組みを提供します[16][17]。具体的には、各レポートに紐づくPaper Format（用紙設定）に「代替レイアウトを適用」フラグを追加し、これをONにすると標準の外部レイアウトテンプレート（web.external_layout_standard）を差し替えるようなQWeb継承が働きます[18][19]。この代替レイアウトでは、見積書や請求書の宛先レイアウトを日本式（取引先住所を左側、自社住所を右側に配置）に変更したり、文書番号・日付をヘッダに表示したりといった調整が施されています[15]。しかし、ユーザから見るとウィザード上の選択肢は従来通り「Light/Boxed/Bold/Striped」のままで、代替レイアウトの適用はPaper Format設定によって制御します[18]。この方法だと標準ウィザード部分には一切手を加えないため、将来のOdooアップデートで標準レイアウト候補が変わっても影響を受けにくいという利点があります。
設計上のポイント: report_alternative_layoutのアプローチは、「ウィザードUIを増やさずにレポート単位でレイアウトを切り替えたい場合」に有効です。今回のケースでは明示的に「Japan」という選択肢を追加したい要件ですので、このモジュールのように既存オプションを使い回す形では目的を果たせません。しかし、コード面ではexternal_layout_standardをQWeb継承で条件分岐する実装など参考になる部分があります。例えば「日本の会社（または日本の帳票）では住所ブロックの順序を入れ替える」といった処理を、Japanレイアウトテンプレート内で固定的に書くのではなく、t-ifに国別条件を入れて共通テンプレートに組み込むことも理論上は可能でしょう[20]。もっとも、シンプルに別テンプレートを用意した今回の方法の方が分離度が高くメンテナンスしやすいと考えられます。
③ OCA の brand_external_report_layout モジュール（ブランド別レイアウト）:
これは企業が複数のブランドを持つ場合に、ブランド毎に異なるレポートレイアウト（ロゴや社名表記など）を適用できるようにするモジュールです[21]。実装としては、res.brandモデル（ブランド）に対し外部レイアウトを選択するフィールドを追加し、帳票出力時に会社ではなくブランドに対応するレイアウトを使うようにテンプレート変数を差し替える仕組みになっています[22]。このモジュールでも、カスタムレイアウト自体はreport.layoutに追加する形で提供されています。たとえば「ブランドA用レイアウト」「ブランドB用レイアウト」をそれぞれ定義し、ブランド設定で選択できるようにしています[23]。ウィザード（base.document.layout）はブランド非対応のため、このモジュールではウィザード画面ではなくブランド設定画面でレイアウトを指定する流れです。つまり、利用シーンに応じてウィザード以外からreport.layoutレコードを選択させることも可能であることを示す例と言えます。
設計上のポイント: この場合もreport.layoutへ複数レコードを追加登録する点は共通ですが、ウィザードUIそのものを拡張せず独自UIで完結させています。今回の「Japan」レイアウトは全帳票で一律に使う前提と思われるため、ブランド別のような複雑な切り替えは不要でしょう。しかしもし「日本の会社の場合のみ自動でJapanレイアウトをデフォルト選択したい」等の要望が出た場合、ブランドモジュールのように会社ごとにデフォルトレイアウトをセットする処理（会社保存時フックやonchangeなど）を検討することもできます。実際、前述のOdoo標準_onchange_company_idでは会社ごとにexternal_report_layout_id（＝使用中レイアウトのビュー）が保持されており、それをキーに対応するreport.layoutを選択する仕組みでした[10]。従って、インストールスクリプトや会社データのXMLで日本の会社レコードについてはexternal_report_layout_idをJapanテンプレートのビューIDに更新しておけば、初期状態からJapanレイアウトが適用された帳票を出力できるようになります。このあたりは運用ニーズに応じて応用可能なポイントです。
以上の調査から、カスタム帳票レイアウトの実装パターンは大きく2つに分けられます。「標準ウィザードに新しい選択肢を追加する」（DIN5008や本件Custom/Japanが該当）パターンと、「ウィザードはそのままに内部ロジックでレイアウト切替を行う」（report_alternative_layoutやbrand_external_report_layoutが該当）パターンです。それぞれメリット・デメリットがありますが、前者はユーザに明示的な選択肢を与えられる反面、UI変更を伴うため競合モジュールとの干渉やアップデート時の確認が必要です。後者はUIに手を入れないため透明性は低いが既存機能との整合性を保ちやすいという特徴があります。今回は要求通り「Japan」という選択肢を出すことが目的ですので、基本路線としては前者（UIに表示）で問題ありません。その際も、上記調査知見を活かし可能な限り標準構造に沿った実装とし、不要なオーバーライドは避けるのが安全と言えます。
「Japan」レイアウトをウィザードに表示させる具体的手順と推奨対応
調査結果を踏まえ、改めてJapanレイアウトをウィザードに表示・適用するための実装手順を整理します。基本的には質問者様が既に行った作業と同様ですが、いくつか確認・修正ポイントを含めて箇条書きにします。
モジュール依存関係の確認: l10n_jp_invoice_systemの__manifest__.pyに 'depends': ['web'] が含まれていることを確認してください[8]。webモジュールにウィザードモデルや標準テンプレートが定義されているため、これを入れることで標準レイアウト関連のデータがロードされた後に自モジュールの定義が適用される順序を保証します。
外部レイアウトテンプレートの定義: views/フォルダにJapan向け外部レイアウトテンプレートをXMLで用意します。既に作成済みの l10n_jp_invoice_system.external_layout_jp が該当しますが、念のため以下を確認してください。
テンプレートは <t t-call="web.html_container"> 内で会社 (company_id or o.company_id) やドキュメント (o や docs) にアクセスする形になっているか[24][25]（標準の構造を踏襲する）。
<t t-name="l10n_jp_invoice_system.external_layout_jp"> ではなく <template id="external_layout_jp"> の形式で定義されているか（他から参照可能なように）確認します。
必要に応じてCSSスタイル調整用のテンプレート（例えばweb.styles_company_reportの継承）や静的CSS/SCSSを用意します。Jort氏の例では SCSS を書き、assetsでweb.report_assets_commonに追加しています[26]。Japanレイアウトでフォントや余白調整が必要なら同様の対応を検討しますが、まずは最低限動作を優先し、必要になった時点で追加でも良いでしょう。
report.layoutレコードの登録: data/フォルダにXML定義を追加し、Japanレイアウト用のreport.layoutレコードを作成します[3]。具体的には:
<record id="report_layout_japan" model="report.layout">
    <field name="name">Japan</field>
    <field name="sequence">6</field>
    <field name="view_id" ref="l10n_jp_invoice_system.external_layout_jp"/>
    <field name="image">/l10n_jp_invoice_system/static/description/japan_preview.png</field>
</record>
idはユニークなXML-ID、sequenceは表示順序です。デフォルトの4レイアウトのシーケンスは（内部的には）1～5程度で割り振られているようなので、6とすればStripedの次に表示されます[4]。特にこだわりが無ければこのままで良いですが、必要に応じ並び順を調整してください。
view_idには先ほど定義したテンプレートの外部IDを参照させます。
imageにはプレビュー画像のパスを指定します。既に「image/PDF付き」とのことなので、おそらく設定済みと思います。プレビューは縦長A4比率のPNG画像が望ましく、解像度は低くても構いません（例: 848x1200ピクセル程度）。この画像はウィザード内のプレビューサムネイルやreport.layout一覧で使われます。
補足: report.layoutにはnameに翻訳対応（translate=True）が付いています[27]。必要であれば他言語環境用に「Japan」の翻訳も用意可能ですが、日本語環境でも通常アルファベット表記のままで問題ないでしょう。
インストール/アップデートの実行: 上記変更を加えたら、odoo -u l10n_jp_invoice_system等でモジュールをアップデートします（Docker環境で実施された-uオプション付き再起動と同様の手順です）。ログ上でテンプレートやデータの読み込みエラーがないか確認してください。特にテンプレート継承に失敗するとビューがロードされず、結果としてreport.layoutレコードのview_idが無効参照になる恐れがあります。正常にアップデートできたなら、Odoo管理画面の「設定 → 技術 → レポート → レポートレイアウト」を開き、「Japan」がリストに存在し、ビューも正しく紐づいているか確認しましょう（この画面で該当レコードを開き、画像が表示されテンプレートへのスマートボタン遷移ができればOKです）。
ウィザードでの動作確認: 開発者モードで「一般設定 → ドキュメントレイアウトを設定」を開きます。レイアウトのラジオ一覧に「Japan」が出現し、選択可能になっていることを確認します。もしこの時点でも表示されない場合、ブラウザのキャッシュではなくOdooサーバのキャッシュの可能性があります。念のため「設定 → 関数 → アセットの削除」からレポート関連アセットをクリアして再度ウィザードを開いてみてください。それでも出ない場合は、再度前述の依存関係やデータ定義に誤りがないか見直す必要があります（例えばXMLのrecord定義にt-if条件が残っていて無効になっている、noupdate="1"が付いていて更新されていない等）。
帳票出力の検証: ウィザードでJapanレイアウトを選択し、「PDFプレビューをダウンロード」（または実際に請求書を印刷）して、新レイアウトが適用されたPDFが生成されることを確認します[28]。ヘッダやフッタの表示が狙い通りになっているか、文字化け等がないかチェックします。不具合があればテンプレート定義やCSSを調整し、再度プレビューで確認します。特に日本語フォントについては、Odoo標準ではPDF出力時にDejaVuフォントが使われますが日本語は含まれないため、豆腐（□）になる可能性があります。その場合、report.fontモデルにフォントを追加して会社に適用するか、fontsディレクトリに日本語フォント（例えば源真ゴシックなどのTTF）を同梱し読み込ませる方法があります。ただしフォント組み込みはPDFサイズ増大等の影響もあるため、必要に応じ検討してください（本件の範囲を超えるため詳細割愛）。
選択状態の保持: Japanレイアウトを適用した後は、会社レコードのexternal_report_layout_idがJapanテンプレート（のビューID）に書き換わります。今後この会社で出力する帳票（請求書や見積書など標準帳票）は自動的にJapanレイアウトが使われるようになります[29]。設定変更が正しく保存されたか、会社マスタ画面で「帳票レイアウト」欄を確認すると良いでしょう。
以上の手順で基本的には要件を満たせる見込みです。
補足対応（任意）: - （検索結果の上限対策） 万一、将来的にレイアウト数が増えてウィザードに表示しきれなくなるような場合には、Many2oneフィールドのname_searchをオーバーライドして上限を拡大することも考えられます。しかし、通常は数件～十数件程度に留まるので過剰な心配かもしれません。現在5件ですので問題ありません。 - （他社モジュールとの差分確認） ご要望の「海外版でカスタム請求書を適用するモジュール」については、前述のDIN5008モジュールが典型例です[30]。DIN5008は欧州の規格ですが、日本の帳票様式との共通点・相違点を把握する上で参考になるでしょう。また、OCAのreport_alternative_layoutは日本向け調整を行っていますが、ウィザードへの選択肢追加は行っていないため、今回のUIには直接関係しません。しかし、同モジュール内のテンプレート（report_payment_receipt_documentなど）を見ると、日本向けの情報配置ロジックが実装されていますので、レイアウト内容検討のヒントになります。
実装後のリスクと確認事項
最後に、本実装に関するリスクや追加で留意すべき点をまとめます。
既存レイアウトへの影響: Japanレイアウト追加自体は既存4種類のレイアウト定義を変更しないため、安全です。他の会社で別レイアウトを使っていても影響ありません。ただし、ウィザードUI上は5件に増えるため、画面の見た目（レイアウト名が長い場合のレイアウト）などに問題がないか軽く目視する程度は必要でしょう。
データ競合: report.layoutはグローバルなマスタですが、同名のレイアウト（例えば「Custom」など）を別モジュールが既に登録していると競合する可能性があります。Japanはユニークな名前のためまず衝突しないと思われます。またXML-IDも固有にしておけば二重定義エラーは避けられます。
アップデート耐性: Odooの将来バージョンアップでreport.layoutやbase.document.layout実装が変わった場合、本実装が影響を受ける可能性は低いですが皆無ではありません。例えば標準のレイアウト種類が追加・変更された場合でも、Japanレイアウトレコード自体はそのまま残るでしょう。ただ、ウィザードビューが変更され、Radioボタンのフィールド名が変わるなど大きな改修があれば、その時点で対応が必要です。とはいえ、公式にカスタムレイアウト追加が想定された設計になっているため、アップデートにも比較的耐性が高いと考えられます。
アンインストール時の挙動: 仮にl10n_jp_invoice_systemモジュールを無効化・アンインストールした場合、対応するreport.layoutレコードとテンプレートビューが削除されます。その際、各会社のexternal_report_layout_idが孤立参照になる恐れがあります（存在しないビューを指す状態）。Odooは存在しない外部レイアウトの場合、自動でデフォルトにフォールバックする処理がありますが[31][29]、明確ではありません。必要に応じ、アンインストール時フック（uninstall_hook）で各会社のexternal_report_layout_idをリセットする処理を入れておくと安全です。もっとも、通常はアンインストールしない前提でしょうから、深刻な問題ではありません。
フォント・PDF出力: 前述の通り、日本語を含む帳票を出力する場合フォント設定に注意が必要です。Odoo 16では標準でIPAフォント等は同梱されていないため、日本語が多用される帳票ではフォントを追加するか、画像化するなどの対策を講じるケースがあります。本件ではレイアウト自体の質問なので詳細は割愛しますが、テスト時には日本語会社名や住所がちゃんと表示されるか確認することをお勧めします。
キャッシュクリア手順: OdooのQWebテンプレートやレポートは、一度ロードされると変更が反映しづらいことがあります。開発段階では都度-uオプションで更新するか、テンプレートIDを変更するなどして強制リロードすることがあります。またブラウザ側もプレビューIframeの内容がキャッシュされることがあるため、ウィザード上のプレビューがどうしても古いままの場合は、一度「保存」してウィザードを閉じた後、再度ウィザードを開き直す、あるいは別ブラウザで確認する、といった工夫も有効です[28]。
以上、調査および考察した内容を踏まえれば、「Japan」レイアウトを追加する実装は概ねデータ定義レベルで完結し、標準機能に沿った安全な拡張と言えます。引用した情報源や類似モジュールの設計を参考に、適宜コードを微調整いただければ幸いです。もし実装後もうまく表示されない場合は、上記チェックリストを再度点検し、それでも原因不明であればフォーラム等でログ情報を添えて質問すると新たな知見が得られるかもしれません。
参考文献・情報源:
Odoo公式ドキュメント「PDF レポート」- デフォルトレイアウトと設定ウィザードの説明[32][4]
Odooフォーラム「New Report Layout」Q&A（Jort de Vreeze氏回答）- カスタムレイアウト追加手順の紹介[9]
Jort de Vreezeブログ「Crafting custom document layouts in Odoo 16」- カスタムレイアウト作成の技術解説[3][2]
Stack Overflow回答 - ウィザードbase.document.layoutのonchangeコード抜粋（レイアウト選択処理の内部）[10]
OCAモジュール report_alternative_layout 説明（日本向け帳票レイアウト調整の概要）[15][18]
OCAモジュール brand_external_report_layout 説明（ブランド別レイアウトの概要）[21][23]
Odoo公式 l10n_din5008 実装（DIN5008レイアウト追加）および関連コミットメッセージ[14][13]（DIN5008モジュールの分離）　など.

[1] [4] [28] [30] [32] PDF reports — Odoo 16.0 documentation
https://www.odoo.com/documentation/16.0/applications/studio/pdf_reports.html
[2] [3] [5] [8] [14] [26] Crafting custom document layouts in Odoo: A step-by-step guide
https://jortdevreeze.com/blog/odoo-2/crafting-custom-document-layouts-in-odoo-a-step-by-step-guide-16
[6] [10] [29] python - Extend wizard in odoo module with super and not overwrite - Stack Overflow
https://stackoverflow.com/questions/60224560/extend-wizard-in-odoo-module-with-super-and-not-overwrite
[7] addons/web/views/base_document_layout_views.xml - odoo - Minka
https://minka.gob.ec/Ramirofl/odoo/-/blob/be4b211ffe0249a4b40f2f290e3ef62ff72535f1/addons/web/views/base_document_layout_views.xml
[9] [11] [12] [24] [25] New Report Layout | Odoo
https://www.odoo.com/forum/help-1/new-report-layout-235963
[13] addons/l10n_din5008/data/report_layout.xml · tmp.saas-15.3 · Ramiro Felix / odoo · GitLab
https://minka.gob.ec/Ramirofl/odoo/-/blob/tmp.saas-15.3/addons/l10n_din5008/data/report_layout.xml
[15] [16] [17] [18] [19] [20] Report Alternative Layout | Odoo Apps Store
https://apps.odoo.com/apps/modules/16.0/report_alternative_layout
[21] [22] [23] Brand External Report Layout | Odoo Apps Store
https://apps.odoo.com/apps/modules/16.0/brand_external_report_layout
[27] code/odoo/odoo/addons/base/models/report_layout.py ... - GitLab
https://gitlab.eynes.com.ar/YPF/ypf17-source/-/blob/1043304795bfe0946b043595c6a2ca877107180b/code/odoo/odoo/addons/base/models/report_layout.py
[31] external_layout_header and external_layout_footer in odoo 13
https://www.odoo.com/forum/help-1/external-layout-header-and-external-layout-footer-in-odoo-13-171366
